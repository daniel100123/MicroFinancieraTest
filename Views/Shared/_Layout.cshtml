<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>@ViewData["Title"] - MicroFinanciera Amates</title>
  <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/site.css" asp-append-version="true" />
@*   <link rel="stylesheet" type="text/css" href="../css/views/TablesDisenio.css?rev=1.0.0.1.25"> *@
  <link href="../css/_bootstrap-icon/bootstrap-icons.css" rel="stylesheet" />
  <link href="../css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../css/portal.css" />
  <link href="../css/animate.min.css" rel="stylesheet" />
  <link href="../css/dataTables.bootstrap5.min.css" rel="stylesheet" />
  <link href="../css/responsive.dataTables.min.css" rel="stylesheet" />
  <link href="../css/tabla.css" rel="stylesheet" />
  <link href="../css/bootstrap/bootstrap.css" />
  <link href="../css/bootstrap.chosen.css" rel="stylesheet" />
  <link href="../js/swal/sweetalert2.min.css" />
  <link href="../js/datepicker/css/bootstrap-datepicker.css" />
  <link href="../js/datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />


  <link href="../css/svg.css" rel="stylesheet" />
</head>
<body style="background-color:#F5F5F5;">
  <header>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm border-bottom box-shadow mb-3 fixed-top" style="background-image: linear-gradient(#202a58, #3b548f 60%,#192549);">
     <div class="container-fluid">
        <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index" style="color: white;">𝐍𝐀𝐁𝐘</a>

      <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
          <ul class="navbar-nav flex-grow-1" id="menu-accordion">

          </ul>
          <div class="app-utility-item app-user-dropdown dropdown" style="position: absolute; top: 20px; right: 100px;">
            <a class="dropdown-toggle" id="user-dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">
              <i style="color: white;" class="bi bi-person-circle fa-lg"></i>
            </a>
            <ul class="dropdown-menu" aria-labelledby="user-dropdown-toggle">
              <li><a class="dropdown-item" id="confirm-logout"><i class="bi bi-box-arrow-right"></i> Cerrar sesión.</a></li>
            </ul>
          </div>
      </div>
     </div>
    </nav>
  </header>
  
  <div class="container mt-2 pt-2">
    <div class="row">
      <div class="col-md-6 d-flex justify-content-start">
        <div class="logo-container2">
@*           <img src="../img/logoFinanciera.jfif" alt="Imagen" class="img-fluid">
 *@        </div>
      </div>
      <div class="col-md-6 d-flex justify-content-end">
        <div class="logo-container1">
          <img src="../img/logoNaby2.jpeg" alt="Imagen" class="img-fluid">
        </div>
      </div>
    </div>
  </div>


  <style>
    header {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 9999;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo-container1 {
      position: relative;
      top: 40px;
      right: 10px;
    }

      .logo-container1 img {
        width: 180px;
        height: auto;
      }

    .logo-container2 {
      position: relative;
      top: 60px;
      left: 20px;
    }

      .logo-container2 img {
        width: 200px;
        height: auto;
      }

    .submenu-list {
      display: none; /* Oculta inicialmente */
      position: absolute; /* Permite que el submenú se muestre flotando */
/*       background-color: #08cee1; /* Fondo blanco
 */      
      background-image: linear-gradient(#202a58, #3b548f 60%,#192549);
/*       background-color: #DCD12D;
 *//*       background-image: linear-gradient(#a400f7, #9417d3 60%, #751fa1 );
     */
      border: 2px solid #d8b057; /* Borde para el submenú */
      z-index: 1000; /* Asegura que esté encima de otros elementos */
    }

    .submenu-item {
      padding: 5px; /* Espaciado interno */
      white-space: nowrap;
    }

      .submenu-item a {
        color: white;
        font-weight: bold;
        text-decoration: none;
        font-size: 12px;
      }

    .nav-item:hover .submenu-list {
      display: block; /* Muestra el submenú al hacer hover sobre el menú principal */
    }


    .app-nav {
      background-color: white;
      /*       background-color: darkblue;
 */    }
  </style>



  <div>
    <div class="pt-5 p-md-5 p-lg-10">
      @RenderBody()
    </div>
  </div>
  @*  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>*@
  <script src="../lib/jquery/dist/jquery.min.js"></script>
  <script src="../lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/popper.min.js"></script>
  <script src="../js/bootstrap.bundle.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/jquery.chosen.min.js"></script>
  <script src="../js/jquery.dataTables.min.js"></script>
  <script src="../js/dataTables.bootstrap5.min.js"></script>
  <script src="../js/dataTables.responsive.min.js"></script>
  <script src="../js/lottie-player.js"></script>
  <script src="../js/site.js?v=1.0.0"></script>
  <script src="../js/_data.js"></script>
  <script src="../js/Global.js?v=1.0.6"></script>
  <script src="../js/alphanum.js"></script>
  <script src="../js/jquery.priceformat.js"></script>
  <script src="../js/jquery.maskMoney.js"></script>
  <script src="../js/swal/sweetalert2@11.js?v=1.0.1"></script>
  <script src="../js/swal/sweetalert2.all.min.js?v=1.0.1"></script>
  <script src="../js/swal/swal.js?v=1.0.1"></script>
  <script src="../js/site.js" asp-append-version="true"></script>
  @await RenderSectionAsync("Scripts", required: false)

  <script type="text/javascript">
    $(function () {
      LoadMenu();
      $("#confirm-logout").click(function () {

        Swal.fire({
          title: '¿Esta seguro?',
          text: "Se eliminará tu sesión y tendras que volver a ingresar!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Confirmar',
          cancelButtonText: 'Cancelar'
        }).then((result) => {
          if (result.isConfirmed) {
            $.ajax({
              url: "@Url.Content("~/Login/LogOut")",
              data: {},
              type: 'POST',
              success: function (_res) {

                Swal.fire({
                  icon: 'success',
                  title: 'success',
                  text: _res.message,
                  allowOutsideClick: false,
                  allowEscapeKey: false,
                  showConfirmButton: false
                })


                setTimeout(function () {
                  location.href = "@Url.Content("~/Login/Login")";
                }, 500);
              }
            });
          }
        });

      });
    });
    function LoadMenu() {
      $.ajax({
        url: '../System/ObtenerMenu',
        type: 'POST',
        data: {},
        dataType: 'JSON',
        contentType: 'application/json; charset=utf-8;',
        beforeSend: function () {
          sLoading();
        },
        success: function (res) {
          if (res.ok) {
            hLoading();
            let menuu = "";

            $.each(res.data, (im, vm) => {
              let submenuContent = ''; // Almacenará los submenús

              $.each(vm.subModule, (is, vs) => {
                if (vs.controller != "") {
                  submenuContent += `<li class="submenu-item"><a class="submenu-link" href="/${vs.controller}/${vs.action}" id="${vs.controller}_${vs.action}">${vs.name}</a></li>`;
                }
              });

              let submenuId = `submenu-${vm.controller}`;
              menuu += `
                            <li class="nav-item dropdown  has-submenu" id="menu1">
                                <a class="nav-link submenu-toggle" href="javascript:void(0);" data-bs-toggle="hover" data-bs-target="#${submenuId}" aria-expanded="false" aria-controls="${submenuId}" id="${vm.controller}">
                                    <span class="nav-icon">
                                                        <i style="color: white;" class="${vm.icon} fa-lg"></i>
                                    </span>
                                                    <span class="nav-link-text" style="color: white;font-weight:bold; font-size: 13px;">${vm.name}</span>
                                     <span class="submenu-arrow">
                                                            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="white" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                        </svg>
                                    </span>
                            </a>
                            <ul class="submenu-list list-unstyled collapse" id="${submenuId}">
                                ${submenuContent}
                            </ul>
                        </li>`;
            });

            $("#menu-accordion").html(menuu);
            var url = window.location;
            var pa = url.pathname.substring(1);
            var locations = pa.split("/");
            if (locations != undefined) {
              if (locations.length == 2) {
                if (locations[0] != 'AdmonConfig') {
                  var pare = $('#' + locations[0]).parent();
                  var div = $(pare).parent();
                  var child = $(div).before();

                  $('#' + locations[0]).addClass('active');
                  $('#' + locations[0]).attr('aria-expanded', "true");
                  $('#submenu-' + locations[0]).addClass('show');
                  $('#' + locations[0] + '_' + locations[1]).addClass('active');
                  $('#app-nav-main').animate({
                    scrollTop: $(child)[0].offsetTop
                  }, 0);
                }
              }
            }
          } else {
            hLoading();
            swalError(res.message);
          }
        },
        error: function () {
          hLoading();
          swalError("An internal error occurred, intentalo nuevamente más tarde.");
        }
      });
    }
    $(document).on('click', '.nav-link', function (e) {
      e.preventDefault();
      var submenu = $(this).siblings('.submenu-list');

      // Cierra todos los submenús abiertos antes de abrir este
      $('.submenu-list').not(submenu).slideUp();

      // Alterna el submenú actual
      submenu.stop(true, true).slideToggle();
    });

    // Cierra el submenú si se hace clic fuera de él
    $(document).on('click', function (e) {
      if (!$(e.target).closest('.nav-item').length) {
        $('.submenu-list').slideUp();
      }
    });



  </script>

</body>
</html>
